(this["webpackJsonpwork-progress"]=this["webpackJsonpwork-progress"]||[]).push([[0],{24:function(e,t,c){},25:function(e,t,c){},3:function(e){e.exports=JSON.parse('{"urls":{"home":"/","bills":"/bills","settings":"/settings"},"localStorageKeys":{"trelloApiKey":"trelloApiKey","trelloApiToken":"trelloApiToken"}}')},34:function(e,t,c){"use strict";c.r(t);var s=c(1),n=c.n(s),l=c(18),a=c.n(l),r=(c(24),c(25),c(5)),i=c(14),o=c.n(i),j=c(0),b=function(e){return Object(j.jsx)("div",{className:"card bg-light bg-gradient",children:Object(j.jsxs)("div",{className:"card-body",children:[Object(j.jsx)("h6",{className:"card-subtitle mb-2",children:e.title}),Object(j.jsx)("h5",{className:"card-title text-success",children:e.isLoading?Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(o.a,{prefix:"$",separator:",",end:e.value}),e.altCurrencyRatio&&Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("span",{children:" / "}),Object(j.jsx)(o.a,{prefix:"~",suffix:" \u20bd",separator:",",end:e.value*e.altCurrencyRatio})]})]}):"Loading..."})]})})},d=function(e){var t=n.a.useState(localStorage.getItem(e)||""),c=Object(r.a)(t,2),s=c[0],l=c[1];return n.a.useEffect((function(){localStorage.setItem(e,s)}),[s]),[s,l]},u=c(3),h=c(2),m="5f4cdb937afb6a829d4ad8e9",O=function(e){return e.reduce((function(e,t){return e+ +t.customFieldItems[0].value.number}),0)},x=function(){var e=d(u.localStorageKeys.trelloApiKey),t=Object(r.a)(e,1)[0],c=d(u.localStorageKeys.trelloApiToken),n=Object(r.a)(c,1)[0],l=Object(h.f)();t&&n||l.push(u.urls.settings);var a=Object(s.useState)(!1),i=Object(r.a)(a,2),o=i[0],x=i[1],f=Object(s.useState)(void 0),g=Object(r.a)(f,2),p=g[0],v=g[1],y=Object(s.useState)([]),N=Object(r.a)(y,2),S=N[0],A=N[1];Object(s.useEffect)((function(){fetch("https://api.exchangeratesapi.io/latest?&base=USD&symbols=RUB").then((function(e){return e.json()})).then((function(e){v(e.rates.RUB)}))}),[]),Object(s.useEffect)((function(){t&&n&&fetch("https://api.trello.com/1/lists/".concat(m,"/cards?key=").concat(t,"&token=").concat(n,"&customFieldItems=true")).then((function(e){return e.json()})).then((function(e){console.log(e),A(e),x(!0)}))}),[m,t,n]);var k=O(S),F=O(S.filter((function(e){return!e.labels||!e.labels.length}))),K=O(S.filter((function(e){return e.labels&&e.labels.length}))),T=Math.max(100-F,0);return Object(j.jsx)("div",{className:"container",children:Object(j.jsxs)("div",{className:"row gy-3",children:[Object(j.jsx)("div",{className:"col-lg",children:Object(j.jsx)(b,{title:"Current Income",value:F,isLoading:o,altCurrencyRatio:p})}),Object(j.jsx)("div",{className:"col-lg",children:Object(j.jsx)(b,{title:"Left to Withdraw",value:T,isLoading:o,altCurrencyRatio:p})}),Object(j.jsx)("div",{className:"col-lg",children:Object(j.jsx)(b,{title:"Withdrawn Earnings",value:K,isLoading:o,altCurrencyRatio:p})}),Object(j.jsx)("div",{className:"col-lg",children:Object(j.jsx)(b,{title:"Total Income",value:k,isLoading:o,altCurrencyRatio:p})})]})})},f=c(9),g=function(){return Object(j.jsxs)("header",{className:"d-flex flex-column flex-md-row align-items-center p-3 px-md-4 mb-3 bg-body border-bottom shadow-sm",children:[Object(j.jsx)("p",{className:"h5 my-0 me-md-auto fw-normal",children:"Work Progress"}),Object(j.jsxs)("nav",{className:"my-2 my-md-0 me-md-3",children:[Object(j.jsx)(f.b,{className:"p-2 text-dark",to:u.urls.home,children:"Analytics"}),Object(j.jsx)(f.b,{className:"p-2 text-dark",to:u.urls.bills,children:"Bills"}),Object(j.jsx)(f.b,{className:"p-2 text-dark",to:u.urls.settings,children:"Settings"})]})]})},p=function(){var e=d(u.localStorageKeys.trelloApiKey),t=Object(r.a)(e,2),c=t[0],s=t[1],n=d(u.localStorageKeys.trelloApiToken),l=Object(r.a)(n,2),a=l[0],i=l[1],o=Object(h.f)();return Object(j.jsxs)("div",{className:"container",children:[Object(j.jsx)("h1",{children:"Settings"}),Object(j.jsx)("div",{className:"row",style:{maxWidth:600},children:Object(j.jsxs)("form",{onSubmit:function(e){e.preventDefault(),o.push(u.urls.home)},children:[Object(j.jsxs)("div",{className:"mb-3",children:[Object(j.jsx)("label",{htmlFor:"trelloApiKey",className:"form-label",children:"Trello API Key"}),Object(j.jsx)("input",{type:"text",className:"form-control",id:"trelloApiKey","aria-describedby":"emailHelp",value:c,onChange:function(e){s(e.target.value)}})]}),Object(j.jsxs)("div",{className:"mb-3",children:[Object(j.jsx)("label",{htmlFor:"trelloApiToken",className:"form-label",children:"Trello API Token"}),Object(j.jsx)("input",{type:"text",className:"form-control",id:"trelloApiToken",value:a,onChange:function(e){i(e.target.value)}})]}),Object(j.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Save"})]})})]})},v="5f4cdb937afb6a829d4ad8e9",y=function(e,t){var c=t.exec(e);return c&&c[1]?c[1].trim():""},N=function(e){var t=y(e.desc,/Order Number:(.+)$/gm),c=y(e.desc,/Order Type:(.+)$/gm);return"".concat(t," (").concat(c,")")},S=function(){var e=d(u.localStorageKeys.trelloApiKey),t=Object(r.a)(e,1)[0],c=d(u.localStorageKeys.trelloApiToken),n=Object(r.a)(c,1)[0],l=Object(h.f)();t&&n||l.push(u.urls.settings);var a=Object(s.useState)(!1),i=Object(r.a)(a,2),o=(i[0],i[1]),b=Object(s.useState)(void 0),m=Object(r.a)(b,2),O=m[0],x=m[1],f=Object(s.useState)([]),g=Object(r.a)(f,2),p=g[0],y=g[1];Object(s.useEffect)((function(){fetch("https://api.exchangeratesapi.io/latest?&base=USD&symbols=RUB").then((function(e){return e.json()})).then((function(e){x(e.rates.RUB)}))}),[]),Object(s.useEffect)((function(){t&&n&&fetch("https://api.trello.com/1/lists/".concat(v,"/cards?key=").concat(t,"&token=").concat(n,"&customFieldItems=true")).then((function(e){return e.json()})).then((function(e){console.log(e),y(e),o(!0)}))}),[v,t,n]);var S=p.filter((function(e){return!e.labels||!e.labels.length})),A=function(e){return e.reduce((function(e,t){return e+ +t.customFieldItems[0].value.number}),0)}(S);return Object(j.jsx)("div",{className:"container",children:Object(j.jsxs)("div",{className:"row gy-3",children:[Object(j.jsx)("h1",{children:"Unpaid Orders"}),Object(j.jsxs)("table",{className:"table table-hover",children:[Object(j.jsx)("thead",{children:Object(j.jsxs)("tr",{children:[Object(j.jsx)("th",{scope:"col",children:"#"}),Object(j.jsx)("th",{scope:"col",children:"Description"}),Object(j.jsx)("th",{scope:"col",align:"right",style:{textAlign:"right"},children:"Coast (USD)"}),Object(j.jsx)("th",{scope:"col",align:"right",style:{textAlign:"right"},children:"Alt Coast (RUB)"})]})}),Object(j.jsxs)("tbody",{children:[S.map((function(e,t){return Object(j.jsxs)("tr",{children:[Object(j.jsx)("th",{scope:"row",children:t+1}),Object(j.jsx)("td",{children:N(e)}),Object(j.jsxs)("td",{align:"right",children:["$",e.customFieldItems[0].value.number]}),Object(j.jsxs)("td",{align:"right",children:[O?"".concat((e.customFieldItems[0].value.number*O).toFixed(2),"\u20bd"):"N/A"," "]})]},e.id)})),Object(j.jsxs)("tr",{className:"table-success",children:[Object(j.jsx)("th",{scope:"row",children:"Total"}),Object(j.jsx)("td",{colSpan:2,align:"right",children:Object(j.jsxs)("b",{children:["$",A]})}),Object(j.jsx)("td",{align:"right",children:Object(j.jsx)("b",{children:O?"".concat((A*O).toFixed(2),"\u20bd"):"N/A"})})]})]})]})]})})};var A=function(){return Object(j.jsxs)(f.a,{children:[Object(j.jsx)(g,{}),Object(j.jsxs)(h.c,{children:[Object(j.jsx)(h.a,{exact:!0,path:u.urls.settings,component:p}),Object(j.jsx)(h.a,{exact:!0,path:u.urls.bills,component:S}),Object(j.jsx)(h.a,{exact:!0,path:u.urls.home,component:x})]})]})},k=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,35)).then((function(t){var c=t.getCLS,s=t.getFID,n=t.getFCP,l=t.getLCP,a=t.getTTFB;c(e),s(e),n(e),l(e),a(e)}))};a.a.render(Object(j.jsx)(n.a.StrictMode,{children:Object(j.jsx)(A,{})}),document.getElementById("root")),k()}},[[34,1,2]]]);
//# sourceMappingURL=main.af4fd290.chunk.js.map