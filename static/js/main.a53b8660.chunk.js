(this["webpackJsonpwork-progress"]=this["webpackJsonpwork-progress"]||[]).push([[0],{24:function(e,t,c){},25:function(e,t,c){},34:function(e,t,c){"use strict";c.r(t);var s=c(1),a=c.n(s),n=c(18),l=c.n(n),r=(c(24),c(25),c(8)),i=c(14),o=c.n(i),j=c(0),u=function(e){return Object(j.jsx)("div",{className:"card bg-light bg-gradient",children:Object(j.jsxs)("div",{className:"card-body",children:[Object(j.jsx)("h6",{className:"card-subtitle mb-2",children:e.title}),Object(j.jsx)("h5",{className:"card-title text-success",children:e.isLoading?Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(o.a,{prefix:"$",separator:",",end:e.value}),e.altCurrencyRatio&&Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("span",{children:" / "}),Object(j.jsx)(o.a,{prefix:"~",suffix:" \u20bd",separator:",",end:e.value*e.altCurrencyRatio})]})]}):"Loading..."})]})})},b=function(e){var t=a.a.useState(localStorage.getItem(e)||""),c=Object(r.a)(t,2),s=c[0],n=c[1];return a.a.useEffect((function(){localStorage.setItem(e,s)}),[s]),[s,n]},d=c(7),m=c(2),h="5f4cdb937afb6a829d4ad8e9",x=function(){var e=b(d.localStorageKeys.trelloApiKey),t=Object(r.a)(e,1)[0],c=b(d.localStorageKeys.trelloApiToken),a=Object(r.a)(c,1)[0],n=Object(m.f)();t&&a||n.push(d.urls.settings);var l=Object(s.useState)(!1),i=Object(r.a)(l,2),o=i[0],x=i[1],O=Object(s.useState)(void 0),f=Object(r.a)(O,2),g=f[0],p=f[1],v=Object(s.useState)([]),y=Object(r.a)(v,2),N=y[0],S=y[1];Object(s.useEffect)((function(){fetch("https://api.exchangeratesapi.io/latest?&base=USD&symbols=RUB").then((function(e){return e.json()})).then((function(e){p(e.rates.RUB)}))}),[]),Object(s.useEffect)((function(){t&&a&&fetch("https://api.trello.com/1/lists/".concat(h,"/cards?key=").concat(t,"&token=").concat(a,"&customFieldItems=true")).then((function(e){return e.json()})).then((function(e){console.log(e),S(e),x(!0)}))}),[h,t,a]);var k=N.reduce((function(e,t){return e+ +t.customFieldItems[0].value.number}),0),A=N.filter((function(e){return!e.labels||!e.labels.length})).reduce((function(e,t){return e+ +t.customFieldItems[0].value.number}),0),C=N.filter((function(e){return e.labels&&e.labels.length})).reduce((function(e,t){return e+ +t.customFieldItems[0].value.number}),0),F=Math.max(100-A,0);return Object(j.jsx)("div",{className:"container",children:Object(j.jsxs)("div",{className:"row gy-3",children:[Object(j.jsx)("div",{className:"col-lg",children:Object(j.jsx)(u,{title:"Current Income",value:A,isLoading:o,altCurrencyRatio:g})}),Object(j.jsx)("div",{className:"col-lg",children:Object(j.jsx)(u,{title:"Left to Withdraw",value:F,isLoading:o,altCurrencyRatio:g})}),Object(j.jsx)("div",{className:"col-lg",children:Object(j.jsx)(u,{title:"Withdrawn Earnings",value:C,isLoading:o,altCurrencyRatio:g})}),Object(j.jsx)("div",{className:"col-lg",children:Object(j.jsx)(u,{title:"Total Income",value:k,isLoading:o,altCurrencyRatio:g})})]})})},O=c(9),f=function(){return Object(j.jsxs)("header",{className:"d-flex flex-column flex-md-row align-items-center p-3 px-md-4 mb-3 bg-body border-bottom shadow-sm",children:[Object(j.jsx)("p",{className:"h5 my-0 me-md-auto fw-normal",children:"Work Progress"}),Object(j.jsx)("nav",{className:"my-2 my-md-0 me-md-3",children:Object(j.jsx)(O.b,{className:"p-2 text-dark",to:"/",children:"Analytics"})}),Object(j.jsxs)(O.b,{className:"btn btn-outline-secondary",to:"/settings",children:[Object(j.jsx)("i",{className:"fa fa-cog"})," Settings"]})]})},g=function(){var e=b(d.localStorageKeys.trelloApiKey),t=Object(r.a)(e,2),c=t[0],s=t[1],a=b(d.localStorageKeys.trelloApiToken),n=Object(r.a)(a,2),l=n[0],i=n[1],o=Object(m.f)();return Object(j.jsxs)("div",{className:"container",children:[Object(j.jsx)("h1",{children:"Settings"}),Object(j.jsx)("div",{className:"row",style:{maxWidth:600},children:Object(j.jsxs)("form",{onSubmit:function(e){e.preventDefault(),o.push(d.urls.home)},children:[Object(j.jsxs)("div",{className:"mb-3",children:[Object(j.jsx)("label",{htmlFor:"trelloApiKey",className:"form-label",children:"Trello API Key"}),Object(j.jsx)("input",{type:"text",className:"form-control",id:"trelloApiKey","aria-describedby":"emailHelp",value:c,onChange:function(e){s(e.target.value)}})]}),Object(j.jsxs)("div",{className:"mb-3",children:[Object(j.jsx)("label",{htmlFor:"trelloApiToken",className:"form-label",children:"Trello API Token"}),Object(j.jsx)("input",{type:"text",className:"form-control",id:"trelloApiToken",value:l,onChange:function(e){i(e.target.value)}})]}),Object(j.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Save"})]})})]})};var p=function(){return Object(j.jsxs)(O.a,{children:[Object(j.jsx)(f,{}),Object(j.jsxs)(m.c,{children:[Object(j.jsx)(m.a,{exact:!0,path:d.urls.settings,children:Object(j.jsx)(g,{})}),Object(j.jsx)(m.a,{exact:!0,path:d.urls.home,children:Object(j.jsx)(x,{})})]})]})},v=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,35)).then((function(t){var c=t.getCLS,s=t.getFID,a=t.getFCP,n=t.getLCP,l=t.getTTFB;c(e),s(e),a(e),n(e),l(e)}))};l.a.render(Object(j.jsx)(a.a.StrictMode,{children:Object(j.jsx)(p,{})}),document.getElementById("root")),v()},7:function(e){e.exports=JSON.parse('{"urls":{"home":"/","settings":"/settings"},"localStorageKeys":{"trelloApiKey":"trelloApiKey","trelloApiToken":"trelloApiToken"}}')}},[[34,1,2]]]);
//# sourceMappingURL=main.a53b8660.chunk.js.map